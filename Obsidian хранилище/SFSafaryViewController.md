#safari #swift #uikit #frameworks
## **Что это вообще такое?**

**_SFSafariViewController_** — это контроллер, который встраивается в ваше приложение. Он обладает возможностями сафари, но при этом пользователь остаётся в вашем приложении и не уходит на сторонний ресурс.

Если вкратце, это готовый браузер, встроенный непосредственно в ваше приложение.

## **Зачем он нужен?**

Этот контроллер используется в тех случаях, когда вы не хотите заморачиваться и создавать свой браузер или вам абсолютно не нужно работать с _JavaScript_. Эдакая библиотека для «ленивых».

Здесь очень уместна фраза «стрелять из гранатомёта по воробьям», где гранатомёт — это _WebKit_. Для простых целей лучше использовать _SFSafariViewController_.

## **Что-то не понимаю, где такое применяется вообще?**

На самом деле во многих приложениях, которые не хотят вас отпускать из своих «цепких лапок»


К примеру, это всеми известный _Telegram_. Когда вы скидываете кому-то из своих знакомых некую ссылку, то при клике по ней открывается окно, в котором отображается тот контент, ссылку на который вы отправили. При этом переход во внешний источник (такой, как браузер сафари) не происходит. Вся «магия» происходит внутри приложения.

![img](https://lms-cdn.skillfactory.ru/assets/courseware/v1/e847f464a6dc3e0d8dd05674e7dc8803/asset-v1:SkillFactory+iOS-2.0+2021+type@asset+block/ios_26_u4_p2.png)

Это супер удобная штука, особенно если вы хотите увеличить время, потраченное пользователем на ваше приложение, так сказать «не отпускать до последнего»

## **Как с этим работать?**

Чтобы получить возможность работать с _SFSafariViewController_, вам необходимо импортировать библиотеку _SafariServices_ в том классе, в котором вы будете создавать SFSafariViewController.
```swift
import SafariServices
```


Чтобы создать `SFSafariViewController`, нужно создать экземпляр класса SFSafariViewController и в качестве аргумента передать какой-то _URL_.
```swift
let safariViewController = SFSafariViewController(url: url)
```


Используйте метод, который презентует новый экран:
```swift
present(safariViewController, animated: true)
```


Вот и все, имея три строчки кода, вы создали новый экран.

## **Как с этим работать в коде?**

Вы писали до этого небольшое приложение, имитирующее некий чат, в котором при нажатии на ссылку вы переходили в новый (кастомный) контроллер, и уже в нем отображался контент.

Используя предыдущий пример, давайте смоделируем ситуацию, где уже вы скинули своему другу некую ссылку. Эта ссылка будет открываться непосредственно в _SFSafariViewController_.

Давайте добавим еще _UI_ на первый экран (имитируем сообщение для вашего друга от вас). Для этого из библиотеки берем _UIButton_ и _ImageView_. В _ImageView_ в качестве изображения подставляем _user2_, а в _UIButton_ подставляем изображение _text4._

После этого выставляем констрейнты, чтобы это было симпатично. Безусловно, вы можете установить свои размеры, ведь у каждого свои критерии прекрасного.

![img](https://lms-cdn.skillfactory.ru/assets/courseware/v1/775b19e62933a8d81a81090d72726675/asset-v1:SkillFactory+iOS-2.0+2021+type@asset+block/ios_26_u4_p3.png)

Создайте Action в классе ViewController с именем myAnswerBtnPressed:
```swift
@IBAction func myAnswerBtnPressed(_ sender: Any) {
  }
```


Настало время приступить к подключению SFSafariViewController .

Вам для этого нужно сделать три шага:

- Шаг 1. Импортируйте _SafariServices_:
```swift
    import SafariServices
```

- Шаг 2. В `myAnswerBtnPressed` создайте экземпляр класса SFSafariViewController с именем `SafariVC`, а в качестве аргумента передайте _URL_ (как создавать _URL_ вы уже знаете).
    
    Строка — _https://www.apple.com/ru-edu/shop/buy-mac/macbook-air_
    
- Шаг 3. Вызовите метод, который покажет экран:
- 
    ```swift
present(safariViewController, animated: true)
```
    
    

Вот, что у вас должно получиться: при клике на сообщение вы должны увидеть новый экран, в котором у вас есть все, как в _Safari_: здесь вы можете переходить по ссылкам, делиться ссылками, открыть контент в браузере и так далее. В общем, полноценный _Safari_.

![img](https://lms-cdn.skillfactory.ru/assets/courseware/v1/66b83b84b6292be6b64f520e17c7ff31/asset-v1:SkillFactory+iOS-2.0+2021+type@asset+block/ios_26_u4_p4.png)

## Скринкаст на тему: «Добавляем сафари контроллер»

Как вы поняли, сафари-контроллер достаточно удобная штука, если вы не хотите заморачиваться. В нем даже есть небольшая возможность кастомизации… очень небольшая :) Но это лучше, чем ничего.

**Что вы можете кастомизировать в контроллере?**

- Цвет всех кнопок и полоски загрузки контента.
- Цвет _NavigationBar_ и _ToolBar_.
- Текст кнопки, которая позволяет вернуться в предыдущей контроллер (по дефолту это кнопка _Done_).

Все возможности представлены в самом классе `SFSafariViewController`:

![img](https://lms-cdn.skillfactory.ru/assets/courseware/v1/d2f959d593ad11fd0faac6947950fee9/asset-v1:SkillFactory+iOS-2.0+2021+type@asset+block/ios_26_u4_p5.png)

