#UICollectionView #custom_item #item
## **Что такое кастомная ячейка Item?**

Это та же самая ячейка, что и выше, только её вы можете настроить для нескольких экранов или для нескольких коллекций.

Этот тип ячеек можно создать при помощи _XIB_-файла (что такое _XIB_-файл, и как его создавать, вы проходили в [девятнадцатом модуле _"UITableView"_](https://lms.skillfactory.ru/courses/course-v1:SkillFactory+iOS-4+14SEP2020/jump_to/block-v1:SkillFactory+iOS-4+14SEP2020+type@vertical+block@250925287e194a53acdbaeeec14b35d9)). Но, если вы забыли как с этим работать, не расстраивайтесь, далее мы вместе пройдем этот путь.

## **Зачем она нужна?**

Кастомная ячейка используется в тех случаях, когда у вас есть несколько экранов или коллекций. Ведь создавать для каждого одинаковые ячейки — не лучший способ потратить свое время.

Куда проще создать один кастомный _Item_ и переиспользовать его там, где это нужно и уместно.

Проще говоря, **кастомизирование упрощает вам работу**.

## **Когда это может понадобиться?**

Данное знание пригодится вам практически в любом проекте, если это не ваш ПЭТ проект (ваш личный проект, который вы создали в рамках образовательных целей или для его продвижения куда-то).

В мало-мальски крупных компаниях уже написано много кода, который стараются уменьшить и оптимизировать. Как раз в них вам понадобятся кастомные элементы.

## **Как это работает?**

Давайте создадим свою кастомную ячейку, а затем подключим к классу _MyCollectionVC_. Пока не стоит «сжигать все мосты» и удалять существующий _Item_, мы сделаем это, когда создадим кастомный.

## Приступаем.

Первым делом вам необходимо создать _Cocoa touch class_ с именем _CustomItemCell_ и сабкласом _UICollectionViewCell_. При создании класса необходимо указать, что вам нужен _XIB-_файл.

![img](https://lms-cdn.skillfactory.ru/assets/courseware/v1/30f9520cb538cdd45dbe6d6342ea74ff/asset-v1:SkillFactory+iOS-2.0+2021+type@asset+block/ios_m23_u8_p3.png)

  

Когда файлы созданы:

![img](https://lms-cdn.skillfactory.ru/assets/courseware/v1/d6f22c4cb254333f216ac41e6b5df5df/asset-v1:SkillFactory+iOS-2.0+2021+type@asset+block/ios_m23_u8_p4.png)

  

Переходим в _CustomItemCell.xib_. Вы увидите небольшой квадрат, который можете растягивать на любые размеры. Установите размеры 200x240 (мы создали по-другому сконфигурированный элемент, чтобы были визуальные отличия от **не**кастомного _Item_) — можете растянуть до этих величин, либо перейти во вкладку _Show the size inspector_ и уже оттуда задать размерность.

Давайте учтем предыдущий опыт и сразу добавим _View_, на котором будем размещать будущие элементы _UI_. Всего их будет три: **_UIImageView_** и **два _UILabel_**.

**Как и в прошлый раз, необходимо задать размеры для _View_:**

1. Сначала установите все констрейнты в ноль, а затем укажите высоту 240, а ширину — 200.
2. После этого добавьте из библиотеки _UI_-элементы:
    
    _UIImageView_ — констрейнты (лево = 0, право = 0, верх = 0, высота = 200)  
    _UILabel_ — констрейнты (лево = 0, право = 0, низ = 0, высота = 20)  
    _UILabel_ — констрейнты (лево = 0, право = 0, низ = 0, высота = 20)
    

Вот, что должно получиться:

![img](https://lms-cdn.skillfactory.ru/assets/courseware/v1/b3ef8d1e9e4dfed0195f236da7dc0422/asset-v1:SkillFactory+iOS-2.0+2021+type@asset+block/ios_m23_u8_p5.png)

  

Установите идентификатор как _CustomItemCell._

Так как у вас уже есть созданный файл с классом _CustomItemCell_, вам необходимо установить ссылки в коде на _UI-_элементы так же, как делали ранее. Когда разберетесь с ссылками, переходите в класс _MyCollectionVC_ для того, чтобы связать этот кастомный элемент с кодом.

Первое, что создаем, — это константу с нашим идентификатором:
```swift
private let customReuseIdentifier = "CustomItemCell"
```


Следующим шагом вы должны создать структуру StructCustomItem, которая будет хранить в себе три поля, которые необходимы для этого _Item_.

Такие как: _Image_, _textOne_, _textTwo_. Все они будут типа _String_.

<mark style="background: #FFB86CA6;">Ключевой момент, который вы должны запомнить: при работе с кастомными _Items_, вы должны регистрировать _XIB_. Без этого ваш кастомный элемент не будет работать!
</mark>

Данную регистрацию можно сделать в методе `viewDidLoad`, главное, чтобы регистрация была раньше, чем приложение получит доступ к классу. Если доступ будет получен раньше или не будет получен вовсе, то случится крэш приложения.
```swift
let xib = UINib(nibName: customReuseIdentifier, bundle: nil)
	collectionView.register(xib, forCellWithReuseIdentifier: customReuseIdentifier)

```

Создайте массив типа `StructCustomItem`, который понадобится для работы далее.
```swift
var arrayCistomItem = [StructCustomItem]()
```


Этот массив естественно необходимо заполнить, и сделаем это по аналогии с прошлым разом в методе `viewDidLoad`. В качестве аргументов передаем имя изображения и два строковых поля для _UIlabel:_
```swift
arrayCistomItem.append(StructCustomItem(image: "temp.lightYellow", textOne: "Light Yellow Color", textTwo: "item one"))
arrayCistomItem.append(StructCustomItem(image: "temp.orange", textOne: "Orange Color", textTwo: "item two"))
arrayCistomItem.append(StructCustomItem(image: "temp.red", textOne: "Red Color", textTwo: "item three"))

```

В методе `numberOfItemsInSection` в качестве значения нужно установить общее значение элементов `arrayCistomItem.count`

Что касается метода, представленного ниже
```swift
collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell
```


То здесь нет ничего нового, также получаете доступ к ячейке по идентификатору и присваиваете значения для _UI_-элементов. Подсмотреть, как это делается, вы можете из предыдущего примера.

В результате вы должны получить вот такой вид:

![img](https://lms-cdn.skillfactory.ru/assets/courseware/v1/f6831d6e4df5f4b66d2530e31b0b5b69/asset-v1:SkillFactory+iOS-2.0+2021+type@asset+block/ios_m23_u8_p6.png)

  

Что касается предыдущего кода, который выполнял работу по отображению двух элементов в _Item_, его вы можете либо удалить, либо оставить. На этом работа с кастомной ячейкой закончена. Можно перейти и поэксперементировать с [[ Кастомный UICollectionViewLayout ]] 